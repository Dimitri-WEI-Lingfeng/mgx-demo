# Agent CLI UI ä½¿ç”¨æ–‡æ¡£

è¿™ä¸ªæ–‡æ¡£ä»‹ç»å¦‚ä½•ä½¿ç”¨ `cli_ui.py` æ¨¡å—æ¥ç¾åŒ– agent çš„å‘½ä»¤è¡Œè¾“å‡ºã€‚

## åŠŸèƒ½ç‰¹æ€§

### 1. ç¾åŒ–çš„äº‹ä»¶å±•ç¤º
- ğŸ¨ å½©è‰²è¾“å‡ºå’Œ emoji å›¾æ ‡
- ğŸ“Š è¿›åº¦æ¡å’Œè¡¨æ ¼å±•ç¤º
- ğŸ­ åŒºåˆ†ä¸åŒ Agent è§’è‰²å’Œäº‹ä»¶ç±»å‹
- â±ï¸ å¯é€‰çš„æ—¶é—´æˆ³æ˜¾ç¤º

### 2. æ”¯æŒçš„äº‹ä»¶ç±»å‹

#### Agent ç”Ÿå‘½å‘¨æœŸäº‹ä»¶
- `agent_start` â–¶ï¸ - Agent å¼€å§‹å·¥ä½œ
- `agent_end` âœ… - Agent å®Œæˆå·¥ä½œ
- `agent_error` âŒ - Agent æ‰§è¡Œé”™è¯¯

#### å·¥å…·è°ƒç”¨äº‹ä»¶
- `tool_start` ğŸ”§ - å·¥å…·è°ƒç”¨å¼€å§‹
- `tool_end` âœ”ï¸ - å·¥å…·è°ƒç”¨å®Œæˆ

#### LLM äº‹ä»¶
- `llm_start` ğŸ¤– - LLM å¼€å§‹ç”Ÿæˆ
- `llm_stream` ğŸ’¬ - LLM æµå¼è¾“å‡ºï¼ˆå®æ—¶æ˜¾ç¤ºï¼‰
- `llm_end` âœ“ - LLM ç”Ÿæˆå®Œæˆ

#### æ¶ˆæ¯äº‹ä»¶
- `message_delta` ğŸ“ - å¢é‡æ¶ˆæ¯
- `message_complete` ğŸ“„ - å®Œæ•´æ¶ˆæ¯

#### å…¶ä»–äº‹ä»¶
- `custom` ğŸ”” - è‡ªå®šä¹‰äº‹ä»¶
- `finish` ğŸ‰ - å·¥ä½œæµå®Œæˆ

### 3. Agent è§’è‰²è¯†åˆ«

æ”¯æŒä»¥ä¸‹ Agent è§’è‰²çš„ç‰¹æ®Šå±•ç¤ºï¼š
- ğŸ‘” **Boss** - éœ€æ±‚æç‚¼
- ğŸ“‹ **Product Manager** - PRD ç¼–å†™
- ğŸ—ï¸ **Architect** - æŠ€æœ¯è®¾è®¡
- ğŸ“Š **Project Manager** - ä»»åŠ¡æ‹†è§£
- ğŸ’» **Engineer** - ä»£ç å®ç°
- ğŸ§ª **QA** - æµ‹è¯•éªŒè¯

### 4. å·¥ä½œæµé˜¶æ®µè¿½è¸ª

è‡ªåŠ¨è¿½è¸ªå’Œæ˜¾ç¤ºå·¥ä½œæµé˜¶æ®µï¼š
- ğŸ“ Requirements Analysis
- ğŸ—ï¸ Architecture Design
- ğŸ’» Code Development
- ğŸ§ª Testing & QA
- âœ… Completed

## ä½¿ç”¨æ–¹æ³•

### åŸºæœ¬ä½¿ç”¨

```python
from agents.cli_ui import AgentStreamUI

# åˆ›å»º UI å®ä¾‹
ui = AgentStreamUI(
    show_timestamps=True,  # æ˜¾ç¤ºæ—¶é—´æˆ³
    verbose=False,         # è¯¦ç»†æ¨¡å¼ï¼ˆæ˜¾ç¤ºå·¥å…·å‚æ•°ç­‰ï¼‰
)

# æ‰“å°å¤´éƒ¨
ui.print_header("ğŸš€ Agent è¿è¡Œç¯å¢ƒ", "ä½¿ç”¨å†…å­˜æ¨¡å¼")

# æ‰“å°ä¿¡æ¯è¡¨æ ¼
ui.print_info_table({
    "Session ID": "sess_123",
    "Workspace": "/path/to/workspace",
    "Framework": "nextjs",
})

# å¤„ç†äº‹ä»¶æµ
for event in event_stream:
    ui.print_event(event)

# æ‰“å°æ‘˜è¦
ui.print_summary(result)
```

### åœ¨ run_agent_local.py ä¸­ä½¿ç”¨

```bash
# ä½¿ç”¨ç¾åŒ–çš„ rich UIï¼ˆé»˜è®¤ï¼‰
uv run src/agents/run_agent_local.py --prompt "åˆ›å»ºä¸€ä¸ªåšå®¢ç³»ç»Ÿ"

# ä½¿ç”¨ rich UI + è¯¦ç»†æ¨¡å¼
uv run src/agents/run_agent_local.py --prompt "åˆ›å»ºä¸€ä¸ªåšå®¢ç³»ç»Ÿ" --ui rich --verbose

# ä½¿ç”¨ç®€å• UI
uv run src/agents/run_agent_local.py --prompt "åˆ›å»ºä¸€ä¸ªåšå®¢ç³»ç»Ÿ" --ui simple

# ä¸ä½¿ç”¨ UIï¼ˆåŸå§‹è¾“å‡ºï¼‰
uv run src/agents/run_agent_local.py --prompt "åˆ›å»ºä¸€ä¸ªåšå®¢ç³»ç»Ÿ" --ui none
```

### å‘½ä»¤è¡Œå‚æ•°

- `--prompt, -p`: ç”¨æˆ·éœ€æ±‚æè¿°ï¼ˆå¿…éœ€ï¼‰
- `--framework, -f`: ç›®æ ‡æ¡†æ¶ï¼ˆnextjs, fastapi-viteï¼‰
- `--workspace, -w`: å·¥ä½œåŒºè·¯å¾„
- `--ui, -u`: UI æ¨¡å¼
  - `rich`: ç¾åŒ–è¾“å‡ºï¼ˆé»˜è®¤ï¼‰
  - `simple`: ç®€å•è¾“å‡º
  - `none`: æ—  UI
- `--verbose, -v`: æ˜¾ç¤ºè¯¦ç»†ä¿¡æ¯

## UI æ¨¡å¼å¯¹æ¯”

### Rich UI (æ¨è)
- âœ… å½©è‰²è¾“å‡ºå’Œ emoji
- âœ… è¡¨æ ¼å’Œé¢æ¿
- âœ… å®æ—¶æµå¼æ˜¾ç¤º
- âœ… ç»Ÿè®¡ä¿¡æ¯å’Œæ‘˜è¦
- âœ… é˜¶æ®µè¿½è¸ª
- ğŸ“Š æœ€ä½³ç”¨æˆ·ä½“éªŒ

### Simple UI
- âœ… åŸºç¡€å½©è‰²è¾“å‡º
- âœ… ç®€å•äº‹ä»¶è®°å½•
- âš¡ è½»é‡çº§
- ğŸ”§ é€‚åˆè°ƒè¯•

### None (æ—  UI)
- âœ… åŸå§‹è¾“å‡º
- âœ… å®Œæ•´äº‹ä»¶è¯¦æƒ…
- ğŸ› é€‚åˆæ—¥å¿—è®°å½•å’Œè°ƒè¯•

## äº‹ä»¶æ ¼å¼

UI æœŸæœ›æ¥æ”¶ä»¥ä¸‹æ ¼å¼çš„äº‹ä»¶ï¼š

```python
{
    "event_type": "agent_start",  # äº‹ä»¶ç±»å‹
    "timestamp": 1704067200.0,    # Unix æ—¶é—´æˆ³
    "data": {                      # äº‹ä»¶æ•°æ®
        "agent_name": "Boss Agent",
        # å…¶ä»–äº‹ä»¶ç‰¹å®šçš„æ•°æ®
    },
    "message_id": "msg_123",      # å¯é€‰ï¼šå…³è”çš„æ¶ˆæ¯ ID
}
```

## ç¤ºä¾‹æ¼”ç¤º

è¿è¡Œæ¼”ç¤ºè„šæœ¬æŸ¥çœ‹æ‰€æœ‰åŠŸèƒ½ï¼š

```bash
uv run src/agents/demo_cli_ui.py
```

è¿™ä¸ªè„šæœ¬ä¼šå±•ç¤ºï¼š
1. å„ç§äº‹ä»¶ç±»å‹çš„æ˜¾ç¤ºæ•ˆæœ
2. Agent å·¥ä½œæµç¨‹
3. å·¥å…·è°ƒç”¨
4. LLM æµå¼è¾“å‡º
5. é˜¶æ®µå˜æ›´
6. é”™è¯¯å¤„ç†
7. ç»Ÿè®¡ä¿¡æ¯å’Œæ‘˜è¦

## è‡ªå®šä¹‰å’Œæ‰©å±•

### æ·»åŠ æ–°çš„ Agent è§’è‰²

åœ¨ `AgentStreamUI.AGENT_STYLES` ä¸­æ·»åŠ ï¼š

```python
AGENT_STYLES = {
    "my_agent": ("ğŸ¯", "bold purple"),
    # emoji, color style
}
```

### æ·»åŠ æ–°çš„äº‹ä»¶ç±»å‹

åœ¨ `AgentStreamUI.EVENT_STYLES` ä¸­æ·»åŠ ï¼š

```python
EVENT_STYLES = {
    "my_event": ("ğŸ””", "magenta"),
    # emoji, color style
}
```

ç„¶ååœ¨ `print_event` æ–¹æ³•ä¸­æ·»åŠ å¤„ç†é€»è¾‘ã€‚

## æŠ€æœ¯æ ˆ

- **rich**: å¼ºå¤§çš„ç»ˆç«¯ç¾åŒ–åº“
- **Python 3.12+**: ç±»å‹æç¤ºå’Œç°ä»£è¯­æ³•

## æœ€ä½³å®è·µ

1. **ä½¿ç”¨ Rich UI**: å¯¹äºäº¤äº’å¼ä½¿ç”¨ï¼Œæ¨èä½¿ç”¨ rich UI
2. **æ—¥å¿—è®°å½•**: å¯¹äºæ—¥å¿—è®°å½•å’Œ CI/CDï¼Œä½¿ç”¨ `none` æ¨¡å¼
3. **è°ƒè¯•**: ä½¿ç”¨ `--verbose` æ ‡å¿—æŸ¥çœ‹è¯¦ç»†ä¿¡æ¯
4. **æ€§èƒ½**: Simple UI é€‚åˆé«˜é¢‘äº‹ä»¶åœºæ™¯

## æ•…éšœæ’é™¤

### è¾“å‡ºä¹±ç 
- ç¡®ä¿ç»ˆç«¯æ”¯æŒ UTF-8 ç¼–ç 
- æ£€æŸ¥ç»ˆç«¯æ”¯æŒé¢œè‰²è¾“å‡º

### Rich åº“æœªå®‰è£…
```bash
uv add rich
# æˆ–
pip install rich
```

### äº‹ä»¶ä¸æ˜¾ç¤º
- æ£€æŸ¥äº‹ä»¶æ ¼å¼æ˜¯å¦æ­£ç¡®
- ç¡®ä¿ `event_type` å­—æ®µå­˜åœ¨
- ä½¿ç”¨ `--verbose` æŸ¥çœ‹è¯¦ç»†è¾“å‡º

## æ›´æ–°æ—¥å¿—

### v0.1.0 (2026-02-01)
- âœ¨ åˆå§‹ç‰ˆæœ¬
- æ”¯æŒæ‰€æœ‰æ ‡å‡†äº‹ä»¶ç±»å‹
- Rich UI å’Œ Simple UI
- ç»Ÿè®¡ä¿¡æ¯å’Œæ‘˜è¦
- é˜¶æ®µè¿½è¸ª
- é”™è¯¯å¤„ç†
